{% extends "base.html" %}
{% load static %}

{% block head %}
  <!-- Book appointment styles -->
  <link rel="stylesheet" href="{% static 'css/gynecologists.css' %}?v=14">

  <!-- Infobox styling (ComfortWall-like) -->
  <style>
  .info-stack {
    display: flex;
    flex-direction: column;
    gap: 14px;
    width: 100%;
    margin-bottom: 1rem;
  }

  .infobox {
    position: relative;
    border-radius: 12px;
    padding: 14px 18px;
    box-shadow: 0 8px 22px rgba(34,20,30,0.05);
    border: 1px solid rgba(217,74,134,0.08);
    background: linear-gradient(180deg,#fff6fb,#fff0f6);
  }

  .infobox--headline {
    background: linear-gradient(180deg,#fff6fb,#ffe6f0);
    border: 3px solid #f85a8f;
    color: #9b1f53;
    font-weight: 800;
    padding: 12px 16px;
    font-size: 1rem;
  }

  .infobox label {
    font-weight: 600;
    color: #7a2e63;
    display: block;
    margin-bottom: 6px;
  }

  .infobox input,
  .infobox textarea {
    width: 100%;
    border-radius: 8px;
    border: 1px solid rgba(0,0,0,0.1);
    padding: 10px 12px;
    font-size: 0.95rem;
    background: #fff;
    margin-bottom: 12px;
    transition: border-color 0.2s, box-shadow 0.2s;
  }

  .infobox input:focus,
  .infobox textarea:focus {
    outline: none;
    border-color: #d6336c;
    box-shadow: 0 0 0 3px rgba(214,51,108,0.15);
  }

  .infobox-actions {
    display:flex;
    gap:12px;
    margin-top: 10px;
  }

  .btn-primary {
    background: linear-gradient(180deg, #d6336c, #c02258);
    border:none;
    padding:10px 16px;
    font-weight:700;
    border-radius:10px;
    color:#fff;
    cursor:pointer;
  }

  .btn-primary:hover {
    background: linear-gradient(180deg, #e85c88, #d6336c);
  }

  .btn-outline-secondary {
    border-radius: 10px;
    font-weight: 600;
    padding: 9px 16px;
    border: 2px solid #ccc;
    color: #555;
    transition: 0.2s;
  }

  .btn-outline-secondary:hover {
    border-color: #d6336c;
    color: #d6336c;
  }

  .modal-content {
    border-radius: 14px;
    box-shadow: 0 10px 30px rgba(0,0,0,0.15);
  }

  .modal-header {
    border-bottom: none;
    background: linear-gradient(180deg,#fff6fb,#ffe6f0);
    border-top-left-radius: 14px;
    border-top-right-radius: 14px;
  }

  .modal-title {
    font-weight: 700;
    color: #9b1f53;
  }

  .modal-footer {
    border-top: none;
  }
  </style>
{% endblock %}

{% block content %}
<div class="container mt-4"
     data-accepted="{% if accepted %}true{% else %}false{% endif %}"
     data-doctor-name="{{ doctor.name|escape }}"
     style="max-width:800px;margin:24px auto;">

  <!-- Headline -->
  <div class="info-stack">
    <div class="infobox infobox--headline">
      Booking Appointment â€” {{ doctor.name }}
    </div>

    <!-- Appointment Form -->
    <div class="infobox">
      <form method="post" novalidate>
        {% csrf_token %}
        {{ form.non_field_errors }}

        <label for="id_patient_name">Your name</label>
        {{ form.patient_name }}

        <label for="id_phone">Phone</label>
        {{ form.phone }}

        <label for="id_email">Email</label>
        {{ form.email }}

        <label for="id_preferred_date">Preferred date</label>
        {{ form.preferred_date }}

        <label for="id_preferred_time">Preferred time</label>
        {{ form.preferred_time }}

        <label for="id_notes">Notes</label>
        {{ form.notes }}

        <div class="infobox-actions">
          <button class="btn-primary" type="submit">Submit Appointment</button>
          <a href="{% url 'flowapp:gynecologists' %}" class="btn-outline-secondary">Cancel</a>
        </div>
      </form>
    </div>
  </div>

  <!-- Modal -->
  <div class="modal fade" id="acceptModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Appointment Confirmed</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <p><strong>{{ doctor.name }}</strong> has accepted your appointment.</p>
          <p>Status: <strong>Accepted</strong></p>
          <p class="small text-muted">This acceptance is predefined for demo purposes.</p>
        </div>
        <div class="modal-footer">
          <a href="{% url 'flowapp:gynecologists' %}" class="btn btn-secondary">Back to list</a>
          <button type="button" class="btn btn-primary" data-bs-dismiss="modal">OK</button>
        </div>
      </div>
    </div>
  </div>

</div>
{% endblock %}

{% block scripts %}
<script src="{% static 'js/book_appointment.js' %}"></script>
{% endblock %}
