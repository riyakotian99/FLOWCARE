{% extends "base.html" %}
{% block content %}
<h2>Order {{ order.id }}</h2>
<p><strong>User:</strong> {{ order.user_id }}</p>
<p><strong>Total:</strong> ₹{{ order.total }}</p>
<p><strong>Payment:</strong> {{ order.payment_id }}</p>
<p><strong>Status:</strong> {{ order.status }}</p>

<h3>Shipping address</h3>
<p>
  {{ order.recipient_name }}<br>
  {{ order.address_line1 }} {% if order.address_line2 %}, {{ order.address_line2 }}{% endif %}<br>
  {{ order.city }}, {{ order.state }} - {{ order.pincode }}<br>
  {{ order.country }}<br>
  Phone: {{ order.phone }}
</p>

<form method="post">
  {% csrf_token %}
  <label for="status">Change status</label>
  <select name="status" id="status">
    <option value="pending" {% if order.status == "pending" %}selected{% endif %}>Pending</option>
    <option value="paid" {% if order.status == "paid" %}selected{% endif %}>Paid</option>
    <option value="shipped" {% if order.status == "shipped" %}selected{% endif %}>Shipped</option>
    <option value="cancelled" {% if order.status == "cancelled" %}selected{% endif %}>Cancelled</option>
  </select>
  <button class="btn-ff" type="submit">Update</button>
</form>

<h3>Items</h3>
<ul>
  {% for it in order.items %}
    <li>{{ it.title }} × {{ it.quantity }} — ₹{{ it.price }}</li>
  {% endfor %}
</ul>

<a href="{% url 'flowfinds:admin_orders' %}">← Back to orders</a>
{% endblock %}
