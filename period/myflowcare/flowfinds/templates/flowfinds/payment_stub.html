{% extends "base.html" %}

{% load static %}
{% block head %}
<link rel="stylesheet" href="{% static 'flowfinds/flowfinds.css' %}">
{% endblock %}

{% block content %}
<div class="container-flowfinds" style="max-width:720px;">
  <div class="flowfinds-hero" style="margin-bottom:1rem;">
    <h1>Checkout</h1>
    <p class="muted">Order #{{ order.id }}</p>
  </div>

  {% if confirmed %}
    <div class="buy-box" style="padding:1rem; border-radius:8px;">
      <h2>Order confirmed!!! ðŸŽ‰</h2>
      <p><strong>Order ID:</strong> {{ order.id }}</p>
      <p><strong>Paid amount:</strong> â‚¹{{ order.total }}</p>
      <p><strong>Payment mode:</strong> {{ payment_mode|default:"Not specified" }}</p>
      <p style="margin-top:.5rem;" class="muted">Thank you! Your order will be processed and shipped soon.</p>

      <div style="margin-top:1rem;">
        <a href="{% url 'flowfinds:product_list' %}" class="btn-ff">Back to store</a>
      </div>
    </div>

  {% else %}
    <div class="buy-box">
      <div>
        <strong>Order ID:</strong> {{ order.id }}<br>
        <strong>Amount to pay:</strong> â‚¹{{ order.total }}
      </div>

      <form method="post" style="margin-top:1rem;">
        {% csrf_token %}
        <label class="muted">Choose payment mode:</label>
        <div style="display:flex; gap:1rem; margin-top:.5rem; align-items:center;">
          <label><input type="radio" name="payment_mode" value="UPI" required> UPI</label>
          <label><input type="radio" name="payment_mode" value="Card" required> Card</label>
          <label><input type="radio" name="payment_mode" value="Cash" required> Cash on Delivery</label>
        </div>

        <div style="margin-top:1rem;">
          <button type="submit" class="btn-ff">Confirm & Pay</button>
          <a href="{% url 'flowfinds:product_list' %}" class="btn-ghost" style="margin-left:.5rem;">Cancel</a>
        </div>
      </form>

      <div style="margin-top:.75rem" class="muted">
        <p>Choose UPI or Card to simulate instant payment, or choose Cash on Delivery to pay when your order arrives.</p>
      </div>
    </div>
  {% endif %}
</div>
{% endblock %}
